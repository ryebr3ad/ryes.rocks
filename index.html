<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Ryes Above's Baubles</title>
	<link rel="icon" href="/img/ryes.png">
	<style>
        body {
            background-color: #121212;
            color: #ffffff;
            margin: 20px;
            height: 100vh;

			-webkit-touch-callout: none; 
    		-webkit-user-select: none;   
    		user-select: none;
    		touch-action: none;         
        }
    </style>
</head>
<body>
	<h2>Ryes Above's Baubles</h2>
	<script>
		let startTime = 0;

		function startTimer(e) {
			if("button" in e) {
				if(e.button != 0) {
					return;
				}
			}
			startTime = +(new Date());
		}

		function placeRock(e) {
			if("button" in e) {
				if(e.button != 0) {
					return;
				}
			}
			let x = e.clientX;
			let y = e.clientY;
			if("touches" in e) {
				x = e.touches[0].clientX;
				y = e.touches[0].clientY;
			}
			let duration = (+(new Date()) - startTime) / 1000;
			const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
			const oscillator = audioCtx.createOscillator();
			const gainNode = audioCtx.createGain();

			const rock = document.createElement('div');
			rock.innerText = 'ðŸª¨';
			rock.style.position = 'absolute';
			rock.style.left = x + 'px';
			rock.style.top = y + 'px';
			rock.style.pointerEvents = 'none';
			rock.style.fontSize = `${30 + (15 * duration)}px`;

			document.body.appendChild(rock);
			const frequency = (e.x / window.innerWidth) * 1000 + 200;
			oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);

			gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);

			oscillator.connect(gainNode);
			gainNode.connect(audioCtx.destination);

			oscillator.start();
			oscillator.stop(audioCtx.currentTime + 0.5);

			setTimeout(() => document.body.removeChild(rock), 1000);

		}

		document.addEventListener('mousedown', startTimer);
		document.addEventListener('touchstart', startTimer);

		document.addEventListener('mouseup', placeRock);
		document.addEventListener('touchend', placeRock);
	


	</script>
</body>
</html>